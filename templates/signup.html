<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Signup - MSPVL College</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="{{url_for('static', filename = 'favicon.png')}}">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.card {
    width: 100%;
    max-width: 450px;
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
}

.card-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-align: center;
    padding: 25px;
}

.form-group {
    margin-bottom: 20px;
}

.input-group {
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    overflow: hidden;
}

.input-group:focus-within {
    border-color: #667eea;
}

.input-group-text {
    background: #f8f9fa;
    border: none;
    color: #667eea;
}

.btn-signup {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px;
    border-radius: 10px;
    width: 100%;
    font-weight: 600;
}

.btn-signup:hover {
    box-shadow: 0 5px 20px rgba(102,126,234,.5);
}
</style>
</head>

<body>

<div class="card">
<div class="card-header">
    <h3>Create Account</h3>
    <p>MSPVL College Student Portal</p>
</div>

<div class="card-body p-4">

<div id="messageBox"></div>

<form id="signupForm">

<div class="form-group">
<label>Username</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-user"></i></span>
<input type="text" class="form-control" id="username" required>
</div>
</div>

<div class="form-group">
<label>Email</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-envelope"></i></span>
<input type="email" class="form-control" id="email" required>
</div>
</div>

<div class="form-group">
<label>Password</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-lock"></i></span>
<input type="password" class="form-control" id="password" required>
</div>
</div>

<button type="submit" class="btn-signup">Create Account</button>

<p class="text-center my-3">or</p>

<button type="button" class="btn-signup" onclick="window.location.href='/login'">
Go to Login
</button>

</form>

<p class="text-center mt-3">
Already have an account?
<a href="/login" style="color:#667eea; font-weight:600;">Login</a>
</p>

</div>
</div>

<script>
document.getElementById("signupForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const res = await fetch("/api/signup", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            username: document.getElementById("username").value.trim(),
            email: document.getElementById("email").value.trim(),
            password: document.getElementById("password").value
        })
    });

    const data = await res.json();

    if(data.success){
        document.getElementById("messageBox").innerHTML =
            `<div class="alert alert-success">${data.message}</div>`;

        setTimeout(() => {
            window.location.href = data.redirect; // âœ… go to complete profile
        }, 1200);
    } else {
        document.getElementById("messageBox").innerHTML =
            `<div class="alert alert-danger">${data.message}</div>`;
    }
});
</script>

</body>
</html>
